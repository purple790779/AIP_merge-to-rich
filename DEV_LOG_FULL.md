# 📘 Merge Money Tycoon - 개발 현황 종합 보고서

> **문서 목적**: 이 문서는 '머지 머니 타이쿤'의 시작부터 `v1.3.0`까지의 모든 개발 과정을 기록한 종합 보고서입니다. NotebookLM 등의 AI 도구가 분석하여 마인드맵, 인포그래픽, 데이터 표 등을 생성할 수 있도록 체계적으로 구조화되었습니다.

---

## 🏗️ 1. 프로젝트 개요 (Project Overview)

| 항목 | 상세 내용 |
|------|-----------|
| **프로젝트명** | Merge Money Tycoon (머지 머니 타이쿤) |
| **플랫폼** | Apps in Toss (토스앱 내 미니게임) |
| **장르** | 하이퍼캐주얼 / 머지(Merge) / 방치형(Idle) |
| **핵심 재미** | 코인을 합쳐 자산을 증식시키는 쾌감, 시원한 타격감의 UI |
| **개발 기간** | 2026.01.28 ~ 2026.02.03 |
| **현재 버전** | `v1.3.0` (Updated: 2026-02-03) |
| **기술 스택** | React 18, Vite, TypeScript, Zustand, Framer Motion, TailwindCSS |

---

## 🤖 2. AI 분석용 요약 (Summary for NotebookLM)

> **NotebookLM을 위한 지시사항**: 이 섹션의 데이터를 사용하여 '게임 구조 마인드맵'과 '성장 곡선 그래프'를 생성하는 데 활용하세요.

### 2.1 핵심 게임 루프 (Core Loop)
1. **생산 (Spawn)**: 자산을 소비하여 코인을 보드에 생성 (Tap/Auto)
2. **병합 (Merge)**: 동일 레벨 코인을 합쳐 상위 코인 획득 (Lv+1)
3. **수익 (Income)**: 보유한 모든 코인이 초당 수익(PPS) 발생
4. **투자 (Upgrade)**: 수익으로 생산/수익 효율 업그레이드
5. **반복 (Loop)**: 자산 9999조 도달 시 엔딩

### 2.2 주요 시스템 키워드
- **Grid System**: 5x5 그리드, 랜덤 빈 셀 탐색 알고리즘
- **Economy**: 지수 함수 기반 비용 증가 ($Costs \propto Level^x$)
- **Engagement**: 부스트(광고), 업적(Achievements), 발견(Discovery)
- **Persistance**: `zustand/persist`를 이용한 자동 저장

---

## 📅 3. 개발 타임라인 (Development Timeline)

### v1.0.0: 프로토타입 (MVP)
- **핵심 기능**: 5x5 그리드 구현, 드래그 앤 드롭 병합 로직
- **경제 시스템**: 초기 자산 50원, 레벨별 PPS 설정
- **UI**: 토스 디자인 시스템(TDS) 스타일의 Clean UI 적용

### v1.1.0: 최적화 및 편의성
- **반응형 개선**: 모바일 화면(360px~480px) 대응 레이아웃
- **시청각 피드백**: 머지 성공 효과음, 햅틱 피드백(Vibration API)
- **머지 보너스**: 합칠 때 일정 확률로 보너스 자산 획득

### v1.2.0: 콘텐츠 확장 & 수익화
- **부스트 모달**: 광고 시청 시뮬레이션 후 보상 (수익2배, 자동병합, 자동생산)
- **히든 콘텐츠**: 
  - 💎 **보석**: Lv.13 이상 시 해금 (고효율 자원)
  - ₿ **비트코인**: Lv.18 (최종 히든 코인)
- **UX 개선**: 드래그 애니메이션 부드럽게 개선 (Framer Motion LayoutProjection)

### v1.3.0: 엔딩 & 밸런싱 (Current)
- **엔딩 시스템**: 9999조 도달 시 축하 모달 및 리셋 (업적 보존)
- **알림 강화**: 업적 달성/첫 코인 발견 시 화려한 토스트 메시지
- **밸런스 대개편**:
  - 업그레이드 비용 대폭 상향 (지루함 방지)
  - 보드 가득채우기 보상 하향 (어뷰징 방지)
- **디테일**:
  - `3조 5000억` 등 한국형 큰 숫자 표기법 적용
  - 상점 아이콘을 실제 게임 내 이모지로 동기화

---

## 🔍 4. 기술 아키텍처 (Technical Architecture)

### 4.1 상태 관리 (State Management) - Zustand
```typescript
interface GameStore {
  // Core Data
  coins: Coin[];
  totalMoney: number;
  
  // Upgrades
  spawnLevel: number;      // 생성되는 코인의 레벨
  spawnCooldown: number;   // 자동 생산 속도
  incomeInterval: number;  // 수익 지급 주기
  
  // Systems
  pps: number;             // Profit Per Second (캐싱됨)
  discoveredLevels: number[]; // 발견한 코인 도감
}
```
* **Store 구조**: 모든 게임 로직이 `useGameStore` 훅 내부에 캡슐화됨 (Action-State 패턴).
* **최적화**: `pps`는 매 프레임 계산하지 않고, 머지/생산 시에만 재계산하여 저장.

### 4.2 병합 알고리즘 (Merge Logic)
1. **Drag End**: 드래그 종료 시 타겟 셀 감지 (유클리드 거리 기반 Nearest Check).
2. **Compatibility**: `ID`가 다르고 `Level`이 같은지 확인.
3. **Process**:
   - `New Level = Old Level + 1`
   - 두 코인 제거, 새 코인 생성 (새 ID 부여).
   - `Trigger Effects`: 햅틱, 사운드, 보너스 계산.
   - `State Update`: 코인 목록 갱신 및 PPS 재계산.

---

## 📊 5. 데이터 및 밸런싱 (Data & Balancing)

> **활용 팁**: 이 데이터를 이용해 엑셀이나 차트를 그려 밸런스 시뮬레이션을 할 수 있습니다.

### 5.1 업그레이드 비용 공식
| 업그레이드명 | 공식 | 설명 |
|------------|------|------|
| **시작 레벨** | $1000 \times Level^2$ | 초반 성장을 막기 위해 가파르게 상승 |
| **생산 속도** | $1000 \times Level^{1.8}$ | 클릭 효율 증대 (부스트 연계) |
| **수익 속도** | $1000 \times Level^{2.0}$ | 패시브 수익 극대화 (가장 비싼 업그레이드) |
| **머지 보너스** | $200 \times (Level+1)^{1.4}$ | 합치는 행위 자체에 보상 부여 |

### 5.2 코인 가치 (Coin Value Table)
| 레벨 | 이름 | PPS (초당 수익) | 생성/구매 가치 |
|:---:|:---:|:---:|:---:|
| 1 | 1원 | 1 | 10 |
| 5 | 500원 | 20 | 500 |
| 10 | 금괴 | 10,000 | 250,000 |
| 12 | 토스 빌딩 | 150,000 | 5,000,000 |
| 18 | 비트코인 | **100억** | (생성 불가) |

---

## 🛠️ 6. 트러블슈팅 로그 (Troubleshooting Log)

### 이슈 1: 무한 루프 (Infinite Loop)
- **증상**: 첫 코인 발견 토스트 표시 직후 화면이 멈추거나 꺼짐.
- **원인**: `useEffect` 의존성 배열에 상태 변경 함수(`clearLastDiscoveredLevel`)를 넣어, 렌더링 → 함수 재생성 → 렌더링의 순환 발생.
- **해결**: `useGameStore.getState().clearFn()`으로 직접 접근하여 의존성 제거.

### 이슈 2: 프로그레스바 멈춤
- **증상**: 수익 게이지바는 차는데 색상이 투명하게 보임.
- **원인**: CSS 변수 `--toss-blue`가 정의되지 않음.
- **해결**: `index.css`의 `:root` 섹션에 변수 추가.

### 이슈 3: 토스트 메시지 위치
- **증상**: `transform: translateX(-50%)` 사용 시 Framer Motion의 `animate` 속성(x, y 이동)과 충돌하여 위치가 어긋남.
- **해결**: `left: 0; right: 0; margin: 0 auto; width: fit-content;` 방식을 사용하여 Transform 없이 중앙 정렬 구현.

---

## 🔮 7. 향후 발전 계획 (Roadmap)

1.  **오프라인 수익 (Offline Earnings)**
    *   앱 종료 후 재접속 시 경과 시간($t$) 계산: $Reward = PPS \times t \times 0.5$ (50% 효율)
2.  **리더보드 (Leaderboard)**
    *   Firebase 등을 연동하여 최대 자산 랭킹 표시.
3.  **사운드 고도화**
    *   배경 음악(BGM) 추가 및 SFX 다양화 (콤보 사운드).
4.  **다국어 지원 (i18n)**
    *   글로벌 출시를 위한 영어/일본어 JSON 리소스 분리.

---
_Generated by Antigravity for Apps in Toss Project_
